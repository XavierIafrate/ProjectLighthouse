<UserControl x:Class="ProjectLighthouse.View.UserControls.DisplayLMOScheduling"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ProjectLighthouse.View.UserControls"
             xmlns:converters ="clr-namespace:ProjectLighthouse.ViewModel.ValueConverters"
             mc:Ignorable="d" d:DesignWidth="600">

    <UserControl.Resources>
        <converters:intToDays x:Key="inttoday"/>
        <converters:StartDateToEndDate x:Key="startToFinish"/>
        <converters:orderItemToRequirementText x:Key="requirementText"/>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" MinWidth="130"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Rectangle x:Name="bg" RadiusX="12.5" RadiusY="12.5" Grid.ColumnSpan="6"/>
        <StackPanel Margin="20,10">
            <TextBlock Text="{Binding Order.Name, FallbackValue='M00001'}" FontSize="20" Foreground="White" FontWeight="Bold"/>
            <TextBlock Text="{Binding Order.Status, FallbackValue='Ready'}" Foreground="White"/>
        </StackPanel>

        <StackPanel Grid.Column="1" Margin="0,10">
            <TextBlock Text="{Binding Order.StartDate, StringFormat='{}Start: {0:ddd dd MMM}', FallbackValue='Start: Mon 01 Jan'}" Foreground="White" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <TextBlock Text="{Binding Order, Converter='{StaticResource startToFinish}', StringFormat='{}Finish: {0:ddd dd MMM}', FallbackValue='Finish: Fri 05 Jan'}" Foreground="White" VerticalAlignment="Center" Margin="0,0,10,0"/>
            <TextBlock Text="{Binding Order.TimeToComplete, Converter='{StaticResource inttoday}', StringFormat='{}Runtime: {0} days', FallbackValue='Runtime: 5 days'}" Foreground="White" Grid.Column="4" VerticalAlignment="Center"/>
            <TextBlock Foreground="White" Grid.Column="4" VerticalAlignment="Center">
                <Run Text="{Binding Order.BarID}"/>
                <Run Text="{Binding Order.NumberOfBars, StringFormat='{}x {0} bars'}"/>
            </TextBlock>
        </StackPanel>

        <ListView Grid.Column="2" Background="Transparent" BorderThickness="0" ItemsSource="{Binding OrderItems}" Margin="0,10,20,10">
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Focusable" Value="False"/>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="150"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="{Binding Path=ProductName}" Foreground="White"/>
                        <TextBlock Text="{Binding Path=TargetQuantity, StringFormat='{}{0:#,##0}'}" Foreground="White" Grid.Column="1" HorizontalAlignment="Right" FontWeight="Bold" Padding="10,0"/>
                        <TextBlock Text="{Binding Converter='{StaticResource requirementText}'}" Grid.Column="2" Foreground="White" HorizontalAlignment="Left" Padding="10,0"/>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</UserControl>
