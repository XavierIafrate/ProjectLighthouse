<Window
    x:Class="ProjectLighthouse.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:ProjectLighthouse"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:ProjectLighthouse.ViewModel"
    Title="Project Lighthouse"
    Width="1312"
    Height="849"
    MinWidth="1200"
    MinHeight="700"
    MaxWidth="2000"
    Background="{StaticResource materialBackground}"
    KeyDown="Window_KeyDown"
    Loaded="Window_Loaded"
    ResizeMode="CanResize"
    WindowStartupLocation="CenterScreen"
    WindowState="Maximized"
    mc:Ignorable="d">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition
                Width="*"
                MinWidth="300"
                MaxWidth="350" />
            <ColumnDefinition Width="4*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="6*" />
        </Grid.RowDefinitions>

        <Rectangle Grid.RowSpan="2" Fill="{StaticResource materialSurface}" />

        <Image
            Width="150"
            RenderOptions.BitmapScalingMode="Fant"
            Source="/Resources/Lighthouse_dark.png" />


        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <ScrollViewer>
                <StackPanel x:Name="main_menu">
                    <StackPanel Margin="0,20">
                        <ToggleButton
                            x:Name="new_request_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="New Request"
                            Content="New Request"
                            Style="{StaticResource NewRequest_MenuItem}" />
                        <ToggleButton
                            x:Name="requests_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="View Requests"
                            Content="View Requests"
                            Style="{StaticResource ViewRequests_MenuItem}" />
                    </StackPanel>

                    <StackPanel Margin="0,20">
                        <ToggleButton
                            x:Name="orders_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="Orders"
                            Content="Orders"
                            Style="{StaticResource Orders_MenuItem}" />

                        <ToggleButton
                            x:Name="schedule_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="Schedule"
                            Content="Schedule"
                            Style="{StaticResource Schedule_MenuItem}" />
                        <!--<ToggleButton
                            x:Name="machine_stats_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="Runtime"
                            Content="Runtime"
                            Style="{StaticResource Runtime_MenuItem}" />-->
                    </StackPanel>

                    <StackPanel Margin="0,20">

                        <ToggleButton
                            x:Name="assemblyOrders_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="Assembly Orders"
                            Content="Assembly Orders"
                            Style="{StaticResource AssemblyOrders_MenuItem}" />
                        <ToggleButton
                            x:Name="assembly_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="Manage Products"
                            Content="Manage Products"
                            Style="{StaticResource ManageProducts_MenuItem}" />
                        <ToggleButton
                            x:Name="BOM_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="Bill of Materials"
                            Content="Bill of Materials"
                            Style="{StaticResource BillOfMaterials_MenuItem}" />
                    </StackPanel>

                    <StackPanel Margin="0,20">
                        <ToggleButton
                            x:Name="deliveries_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="Deliveries"
                            Content="Deliveries"
                            Style="{StaticResource Deliveries_MenuItem}" />
                    </StackPanel>

                    <StackPanel Margin="0,20">
                        <ToggleButton
                            x:Name="analytics_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="Analytics"
                            Content="Analytics"
                            Style="{StaticResource Analytics_MenuItem}" />
                        <ToggleButton
                            x:Name="manage_users_button"
                            Command="{Binding UpdateViewCommand}"
                            CommandParameter="Manage Users"
                            Content="Manage Users"
                            Style="{StaticResource ManageUsers_MenuItem}" />
                    </StackPanel>

                </StackPanel>
            </ScrollViewer>
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="auto" />
                </Grid.ColumnDefinitions>
                <Rectangle Grid.ColumnSpan="2" Fill="{StaticResource materialPrimaryBlue}" />
                <StackPanel Margin="20,10" VerticalAlignment="Center">
                    <TextBlock
                        FontSize="20"
                        x:Name="LoggedInUserName"
                        Foreground="{StaticResource materialOnPrimary}"
                        Text="Randy Marsh" />
                    <TextBlock
                        FontStyle="Italic"
                        x:Name="LoggedInUserRole"
                        Foreground="{StaticResource materialOnPrimary}"
                        Text="Viewer" />
                </StackPanel>

                <Button
                    Grid.Column="1"
                    Margin="20"
                    Command="{Binding EditCommand}"
                    Style="{StaticResource SettingsButton}" />
            </Grid>
        </Grid>


        <Grid Grid.Column="1">
            <StackPanel
                VerticalAlignment="Center"
                Orientation="Horizontal"
                Visibility="{Binding BetaWarningVis}">

                <Grid Margin="30,5,10,5">
                    <Rectangle
                        Fill="{StaticResource materialError}"
                        RadiusX="5"
                        RadiusY="5" />
                    <TextBlock
                        Padding="15,0,15,1"
                        VerticalAlignment="Center"
                        FontSize="18"
                        FontWeight="Bold"
                        Foreground="{StaticResource materialOnError}"
                        Text="BETA" />
                </Grid>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock
                        FontSize="15"
                        FontStyle="Italic"
                        Opacity="0.5"
                        Text="This part of Lighthouse is in Beta testing" />
                    <TextBlock
                        FontSize="15"
                        FontStyle="Italic"
                        Opacity="0.5"
                        Text="Watch out for bugs!" />
                </StackPanel>
            </StackPanel>
            <Viewbox
                MaxHeight="70"
                Margin="50,20"
                HorizontalAlignment="Right">

                <TextBlock
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Foreground="{StaticResource materialOnBackground}"
                    Text="{Binding NavText, FallbackValue=CURR_VIEW}" />
            </Viewbox>

        </Grid>
        <ContentControl
            Grid.Row="1"
            Grid.Column="1"
            Content="{Binding SelectedViewModel}" />
    </Grid>
</Window>
